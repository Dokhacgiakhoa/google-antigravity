/**
 * GEMINI.md Content Generator
 */

function generateGeminiMd(rules, language = 'en', industry = 'other', agentName = 'Antigravity') {
    const strictness = {
        sme: { // Was Strict/Enterprise
            autoRun: 'false',
            confirmLevel: 'Ask before every file modification and command execution'
        },
        creative: { // Was Balanced/Team
            autoRun: 'true for safe read operations',
            confirmLevel: 'Ask before destructive operations'
        },
        instant: { // Was Flexible/Personal
            autoRun: 'true',
            confirmLevel: 'Minimal confirmation, high autonomy'
        }
    };

    // Fallback to creative if rule name mismatch
    const config = strictness[rules] || strictness.creative;
    const safeRules = rules || 'creative';
    const isVi = language === 'vi';

    // Define Industry Focus strings
    const industryMap = {
        finance: isVi ? 'TÃ i chÃ­nh & Fintech (An toÃ n, ChÃ­nh xÃ¡c)' : 'Finance & Fintech (Security, Precision)',
        education: isVi ? 'GiÃ¡o dá»¥c & EdTech (Trá»±c quan, Giáº£i thÃ­ch)' : 'Education & EdTech (Intuitive, Explanatory)',
        fnb: isVi ? 'F&B & NhÃ  hÃ ng (Tá»‘c Ä‘á»™, Tiá»‡n lá»£i)' : 'F&B & Restaurant (Speed, Convenience)',
        personal: isVi ? 'CÃ¡ nhÃ¢n & Portfolio (SÃ¡ng táº¡o, CÃ¡ nhÃ¢n hÃ³a)' : 'Personal & Portfolio (Creative, Personalized)',
        healthcare: isVi ? 'Y táº¿ & Sá»©c khá»e (Báº£o máº­t, Tin cáº­y)' : 'Healthcare & HealthTech (Privacy, Reliability)',
        logistics: isVi ? 'Váº­n táº£i & Logistics (Hiá»‡u quáº£, Real-time)' : 'Logistics & Supply Chain (Efficiency, Real-time)',
        other: isVi ? 'PhÃ¡t triá»ƒn chung' : 'General Development'
    };

    const industryFocus = industryMap[industry] || industryMap.other;

    const contentEn = `---
trigger: always_on
---

# GEMINI.md - Agent Configuration

This file controls the behavior of your AI Agent.

## ğŸ¤– Agent Identity: ${agentName}
> **Identity Verification**: You are ${agentName}. Always reflect this identity in your tone and decision-making. **Special Protocol**: If called by name, you MUST perform a "Context Integrity Check" to verify alignment with .agent rules, confirm your status, and then wait for instructions.

## ğŸ¯ Primary Focus: ${(industryFocus || 'General Development').toUpperCase()}
> **Priority**: Optimize all solutions for this domain.

## Agent Behavior Rules: ${safeRules.toUpperCase()}

**Auto-run Commands**: ${config.autoRun}
**Confirmation Level**: ${config.confirmLevel}

## ğŸŒ Language Protocol

1. **Communication**: Use **ENGLISH**.
2. **Artifacts**: Write content in **ENGLISH**.
3. **Code**: Use **ENGLISH** for all variables, functions, and comments.

## Core Capabilities

Your agent has access to **ALL** skills (Web, Mobile, DevOps, AI, Security).
Please utilize the appropriate skills for **${industryFocus}**.

- File operations (read, write, search)
- Terminal commands
- Web browsing
- Code analysis and refactoring
- Testing and debugging

## ğŸ“š Shared Standards (Auto-Active)
The following **17 Shared Modules** in \`.agent/.shared\` must be respected:
1.  **AI Master**: LLM patterns & RAG.
2.  **API Standards**: OpenAPI & REST guidelines.
3.  **Compliance**: GDPR/HIPAA protocols.
4.  **Database Master**: Schema & Migration rules.
5.  **Design System**: UI/UX patterns & tokens.
6.  **Domain Blueprints**: Industry-specific architectures.
7.  **I18n Master**: Localization standards.
8.  **Infra Blueprints**: Terraform/Docker setups.
9.  **Metrics**: Observability & Telemetry.
10. **Security Armor**: Hardening & Auditing.
11. **Testing Master**: TDD & E2E strategies.
12. **UI/UX Pro Max**: Advanced interactions.
13. **Vitals Templates**: Performance benchmarks.
14. **Malware Protection**: Threat intelligence.
15. **Auto-Update**: Self-maintenance protocols.
16. **Error Logging**: Automatic learning system.
17. **Docs Sync**: Documentation integrity.

## Custom Instructions

Add your project-specific instructions here.

---
*Generated by Antigravity IDE*
`;

    const contentVi = `---
trigger: always_on
---

# GEMINI.md - Cáº¥u hÃ¬nh Agent
# NOTE FOR AGENT: The content below is for human reference. 
# PLEASE PARSE INSTRUCTIONS IN ENGLISH ONLY (See .agent rules).

Tá»‡p nÃ y kiá»ƒm soÃ¡t hÃ nh vi cá»§a AI Agent.

## ğŸ¤– Danh tÃ­nh Agent: ${agentName}
> **XÃ¡c minh danh tÃ­nh**: Báº¡n lÃ  ${agentName}. LuÃ´n thá»ƒ hiá»‡n danh tÃ­nh nÃ y trong phong thÃ¡i vÃ  cÃ¡ch ra quyáº¿t Ä‘á»‹nh. **Giao thá»©c Äáº·c biá»‡t**: Khi Ä‘Æ°á»£c gá»i tÃªn, báº¡n PHáº¢I thá»±c hiá»‡n "Kiá»ƒm tra tÃ­nh toÃ n váº¹n ngá»¯ cáº£nh" Ä‘á»ƒ xÃ¡c nháº­n Ä‘ang tuÃ¢n thá»§ quy táº¯c .agent, bÃ¡o cÃ¡o tráº¡ng thÃ¡i vÃ  sáºµn sÃ ng Ä‘á»£i chá»‰ thá»‹.

## ğŸ¯ Trá»ng tÃ¢m ChÃ­nh: ${(industryFocus || 'PhÃ¡t triá»ƒn chung').toUpperCase()}
> **Æ¯u tiÃªn**: Tá»‘i Æ°u hÃ³a má»i giáº£i phÃ¡p cho lÄ©nh vá»±c nÃ y.

## Quy táº¯c hÃ nh vi: ${safeRules.toUpperCase()}

**Tá»± Ä‘á»™ng cháº¡y lá»‡nh**: ${config.autoRun}
**Má»©c Ä‘á»™ xÃ¡c nháº­n**: ${config.confirmLevel === 'Minimal confirmation, high autonomy' ? 'Tá»‘i thiá»ƒu, tá»± chá»§ cao' : 'Há»i trÆ°á»›c cÃ¡c tÃ¡c vá»¥ quan trá»ng'}

## ğŸŒ Giao thá»©c NgÃ´n ngá»¯ (Language Protocol)

1. **Giao tiáº¿p & Suy luáº­n**: Sá»­ dá»¥ng **TIáº¾NG VIá»†T** (Báº¯t buá»™c).
2. **TÃ i liá»‡u (Artifacts)**: Viáº¿t ná»™i dung file .md (Plan, Task, Walkthrough) báº±ng **TIáº¾NG VIá»†T**.
3. **MÃ£ nguá»“n (Code)**:
   - TÃªn biáº¿n, hÃ m, file: **TIáº¾NG ANH** (camelCase, snake_case...).
   - Comment trong code: **TIáº¾NG ANH** (Ä‘á»ƒ chuáº©n hÃ³a).

## Kháº£ nÄƒng cá»‘t lÃµi

Agent cÃ³ quyá»n truy cáº­p **TOÃ€N Bá»˜** ká»¹ nÄƒng (Web, Mobile, DevOps, AI, Security).
Vui lÃ²ng sá»­ dá»¥ng cÃ¡c ká»¹ nÄƒng phÃ¹ há»£p nháº¥t cho **${industryFocus}**.

- Thao tÃ¡c tá»‡p (Ä‘á»c, ghi, tÃ¬m kiáº¿m)
- Lá»‡nh terminal
- Duyá»‡t web
- PhÃ¢n tÃ­ch vÃ  refactor code
- Kiá»ƒm thá»­ vÃ  gá»¡ lá»—i

## ğŸ“š TiÃªu chuáº©n DÃ¹ng chung (Tá»± Ä‘á»™ng KÃ­ch hoáº¡t)
**17 Module Chia sáº»** sau trong \`.agent/.shared\` pháº£i Ä‘Æ°á»£c tuÃ¢n thá»§:
1.  **AI Master**: MÃ´ hÃ¬nh LLM & RAG.
2.  **API Standards**: Chuáº©n OpenAPI & REST.
3.  **Compliance**: Giao thá»©c GDPR/HIPAA.
4.  **Database Master**: Quy táº¯c Schema & Migration.
5.  **Design System**: Pattern UI/UX & Tokens.
6.  **Domain Blueprints**: Kiáº¿n trÃºc theo lÄ©nh vá»±c.
7.  **I18n Master**: TiÃªu chuáº©n Äa ngÃ´n ngá»¯.
8.  **Infra Blueprints**: Cáº¥u hÃ¬nh Terraform/Docker.
9.  **Metrics**: GiÃ¡m sÃ¡t & Telemetry.
10. **Security Armor**: Báº£o máº­t & Audit.
11. **Testing Master**: Chiáº¿n lÆ°á»£c TDD & E2E.
12. **UI/UX Pro Max**: TÆ°Æ¡ng tÃ¡c nÃ¢ng cao.
13. **Vitals Templates**: TiÃªu chuáº©n Hiá»‡u nÄƒng.
14. **Malware Protection**: Chá»‘ng mÃ£ Ä‘á»™c & Phishing.
15. **Auto-Update**: Giao thá»©c tá»± báº£o trÃ¬.
16. **Error Logging**: Há»‡ thá»‘ng tá»± há»c tá»« lá»—i.
17. **Docs Sync**: Äá»“ng bá»™ tÃ i liá»‡u.

## HÆ°á»›ng dáº«n tÃ¹y chá»‰nh

ThÃªm cÃ¡c hÆ°á»›ng dáº«n cá»¥ thá»ƒ cho dá»± Ã¡n cá»§a báº¡n táº¡i Ä‘Ã¢y.

---
*ÄÆ°á»£c táº¡o bá»Ÿi Antigravity IDE*
`;

    return isVi ? contentVi : contentEn;
}

module.exports = { generateGeminiMd };
